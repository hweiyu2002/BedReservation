@page "/userLogin"
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime
@inherits LayoutComponentBase


<h3 style="color: #000000; background-color: #acc7d0; padding: 10px; text-align: center; display: block; width: 100%;">化療病床預約平台</h3>
<br >
<h4 style="text-align: center;">登入資料</h4>
<br />
<br />
<br />
<br />

<div style="display: flex; flex-direction: column; align-items: center;">
    <div class="form-group">
        <label>身分證字號</label>
        <input @bind="IdNumber" />
        @if (!IsValidIdFormat(IdNumber) && ShowIdError)
        {
            <p style="color: red;  font-size:13px;">※身分證格式不正確，請重新輸入</p>
        }
    </div>
    <br />

    <div class="form-group">
        <label>密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;碼</label>
        <input type="password" @bind="Password" />
    </div>
    <br />

    <button @onclick="NextStep" style="background-color: #E0E0E0; color: #272727; border: 1px solid black; margin-right: 10px;">登入</button>

</div>

@code {
    private string IdNumber { get; set; } = string.Empty;
    private string Password { get; set; } = string.Empty;
    private bool ShowIdError { get; set; } = false;

    private bool IsValidIdFormat(string idNumber)
    {
        // 身分證格式檢查，第一個字母大寫 + 9 位數字
        return System.Text.RegularExpressions.Regex.IsMatch(idNumber, "^[A-Z]\\d{9}$");
    }

    private void NextStep()
    {
        // 檢查身分證格式
        if (!IsValidIdFormat(IdNumber))
        {
            // 如果格式不正確，顯示錯誤信息
            ShowIdError = true;
            return;
        }

        // 重置錯誤顯示
        ShowIdError = false;

        SharedData.IdNumber = IdNumber; // 將使用者輸入的身分證字號設定到 SharedData
        Navigation.NavigateTo("/home");
    }
}



<!--
<span style="font-size:20px;cursor:pointer" @onclick="OpenNav">&#9776; 選單</span>

<div class="sidebar" id="mySidebar">
    <a href="javascript:void(0)" class="closebtn" @onclick="CloseNav">&#9665; 關閉選單</a>
    <a href="/">首頁</a>
    <a href="/reservation">預約化療時段</a>
    <a href="/form">評估表單</a>
    <a href="/myAppointments">我的預約</a>
    <div class="logout-link">
        <a href="/">登出</a>
    </div>
</div>
-->

<div style="margin-left:80px;">
    <!-- Adjust the margin to account for the sidebar width -->
    <!-- Your existing login form code here -->
</div>



<style>/*
    .sidebar {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #B3B3B3;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
        display: flex;
        flex-direction: column;
    }

        .sidebar a {
            padding: 8px 8px 8px 32px;
            text-decoration: none;
            font-size: 18px;
            color: #000000;
            transition: 0.3s;
        }

            .sidebar a:hover {
                color: #f1f1f1;
            }

            .sidebar a:not(:last-child)::after {
                content: "";
                display: block;
                height: 1px;
                background-color: #000000;
                margin-top: 8px; 
                margin-bottom: 8px; 
            }

        .sidebar .closebtn {
            position: absolute;
            top: 0;
            left: 0px;
            font-size: 20px;
            margin-left: 0px;
        }
    .logout-link {
        margin-top: auto;
        margin-left: 50px;
        margin-bottom: 10px;
    }
   */</style>

   <!--
<script>
    function openNav() {
        document.getElementById("mySidebar").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidebar").style.width = "0";
    }
</script>
-->
